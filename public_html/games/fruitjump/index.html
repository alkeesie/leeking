<!doctype html>
<html><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Fruit Jump</title>
<link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;900&family=Lora:wght@400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/styles.css?v=3">
<style>html,body{margin:0;background:#0b1020}</style>
</head><body>
<nav class="nav nav--on-dark wrapper"><a class="brand" href="/">leek.ing</a><a href="/dashboard.php">Bandit dashboard</a><a href="/control.html">Control panel</a><a href="/about.html">About the experiment</a></nav>
<main class="wrapper">
  <div class="game-shell">
    <canvas id="game"></canvas>
  </div>
</main>
<div class="ad-slot">
  <span class="badge" aria-hidden="true">AD</span>
  <a id="banner-link" href="/click.html" rel="nofollow noopener">
    <img id="banner-img" src="/assets/banners/control_static.png" alt="Ad" width="728" height="90">
    <video id="banner-video" width="728" height="90" muted playsinline loop preload="metadata"></video>
  </a>
</div>
<footer>Â© leek.ing</footer>
<script src="https://kaboomjs.com/lib/0.5.0/kaboom.js"></script>
<script>
  const k = kaboom({ canvas: document.querySelector('#game'), width: 480, height: 640, background: [11,16,32] });
  const { gravity, height, width, add, rect, pos, area, solid, color, body, anchor, onKeyPress, onClick, text, rand, move, LEFT, loop, go, scene, destroy, wait, circle } = k;
  gravity(1400);
  const GY = height() - 40;
  add([rect(width(),40), pos(0,GY), area(), solid(), color(20,26,46)]);
  const p = add([ pos(80, GY-30), rect(28,28), color(255,210,90), area(), body(), anchor('botleft') ]);
  const JUMP=420;
  onKeyPress('space', ()=>p.isGrounded()&&p.jump(JUMP));
  onClick(()=>p.isGrounded()&&p.jump(JUMP));
  let score=0;
  const label=add([text('0'), pos(12,12)]);
  function spawnFruit(){ const y=rand(GY-160,GY-60); add([pos(width(),y), circle(12), color(120,220,120), area(), move(LEFT,240), 'fruit']); }
  function spawnBomb(){ const y=rand(GY-160,GY-60); add([pos(width(),y), circle(12), color(230,70,70), area(), move(LEFT,260), 'bomb']); }
  loop(1.0, spawnFruit);
  loop(3.2, spawnBomb);
  p.onCollide('fruit', (f)=>{ destroy(f); score++; label.text = score+''; });
  p.onCollide('bomb', ()=>go('over'));
  p.onUpdate(()=>{ if (p.pos.y>GY+2) go('over'); });
  scene('over', ()=>{
    add([text(`Game Over\nScore: ${score}\nPress Space/Click`), pos(width()/2,height()/2), anchor('center')]);
    onKeyPress(()=>location.reload());
    onClick(()=>location.reload());
  });
</script>
<script defer src="/bandit/bandit.js?v=3"></script>
</body></html>
